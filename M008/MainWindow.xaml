<Window x:Class="M008.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:sys="clr-namespace:System;assembly=System.Runtime"
        xmlns:local="clr-namespace:M008"
        Title="MainWindow" Height="450" Width="800"
		WindowStartupLocation="CenterScreen" Topmost="True"
		DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <StackPanel>
		<!--MarkupExtension-->
		<!--Alles was zwischen { } steht-->
		<!--Hat eine Methode (ProvideValue), die den Wert an die GUI weitergibt-->
		
		<!--Beispiel: Enum an eine ComboBox anbinden-->
		<ComboBox ItemsSource="{Binding Wochentage}"/>

		<!--Mit MarkupExtension-->
		<ComboBox ItemsSource="{local:Enum EnumType=sys:DayOfWeek}" SelectedValue="{Binding SelectedDay}"/>
		<Button Content="Hallo" Click="Button_Click"/>
		
		<!--Beispiel: Converter einbinden ohne Resource-->
		<Slider Minimum="0" Maximum="100" Value="0" Name="ScoreSlider" TickFrequency="1" IsSnapToTickEnabled="True"/>
		<TextBlock Text="{Binding ElementName=ScoreSlider, Path=Value, Converter={local:Converter ConverterType=local:ScoreToGradeConverter}}"/>
		
		<!--Beispiel: Farben in einer ComboBox anzeigen-->
		<ComboBox ItemsSource="{local:Colors}" SelectedValue="{Binding SelectedColor}" SelectedValuePath="Color">
			<ComboBox.ItemTemplate>
				<DataTemplate DataType="local:NamedColor">
					<StackPanel Orientation="Horizontal">
						<Rectangle Stroke="Black" StrokeThickness="2" Width="20" Height="20" Fill="{Binding Brush}"/>
						<TextBlock Text="{Binding Name, StringFormat=' {0}'}" VerticalAlignment="Center"/>
						<TextBlock Text="{Binding HexCode, StringFormat=' ({0})'}" VerticalAlignment="Center"/>
					</StackPanel>
				</DataTemplate>
			</ComboBox.ItemTemplate>
		</ComboBox>
		
		<!--................................................................-->
		
		<!--Relative Quellen-->
		
		<!--Self-->
		<!--Selbstbindung-->
		<!--Kann ohne Name verwendet werden-->
		<Rectangle Width="{Binding ElementName=Slider, Path=Value}"
				   Height="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Width}" Stroke="Black" StrokeThickness="2"/>
		<Slider Minimum="10" Maximum="200" Value="0" Name="Slider"/>
		
		<!--TemplatedParent-->
		<!-- -> TemplateBinding-->
		<Button Content="Hallo">
			<Button.Template>
				<ControlTemplate TargetType="Button">
					<Border BorderBrush="Aqua" BorderThickness="2" CornerRadius="5">
						<TextBlock Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}"
								   Background="{TemplateBinding Background}"
								   TextAlignment="Center"/>
					</Border>
				</ControlTemplate>
			</Button.Template>
		</Button>
		
		<!--FindAncestor-->
		<!--Elemente im Visual Tree suchen und daraus Werte entnehmen-->
		<!--Wird u.a. verwendet, um bei generierten GUI-Elementen Anpassungen an den umliegenden Container zu machen-->
		<Grid Background="Orange">
			<Grid Background="Aqua">
				<Grid Background="LightGreen">
					<Button Content="Hallo" Background="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorLevel=3, AncestorType=Grid}, Path=Background}"/>
				</Grid>
			</Grid>
		</Grid>
		
		<!--PreviousData-->
		<!--Erlaubt Zugriff auf das vorherige Element innerhalb einer Listenkomponente-->
		<ListBox ItemsSource="{Binding Wochentage}">
			<ListBox.ItemTemplate>
				<DataTemplate>
					<StackPanel Orientation="Horizontal">
						<TextBlock Text="{Binding .}" Margin="0, 0, 10, 0"/>  <!--Binding .: Zeigt den Datensatz selbst an-->
						<TextBlock Text="{Binding RelativeSource={RelativeSource Mode=PreviousData}}" Foreground="Red"/>
					</StackPanel>
				</DataTemplate>
			</ListBox.ItemTemplate>
		</ListBox>
	</StackPanel>
</Window>
